const LOCALE_KEY = "alievs_space_locale";

export const SUPPORTED_LOCALES = [
  { code: "en", label: "English" },
  { code: "ru", label: "Русский" },
  { code: "az", label: "Azərbaycanca" }
];

export const DEFAULT_LOCALE = "en";

function getNavigatorLocale() {
  try {
    const nav = navigator.language || (navigator.languages && navigator.languages[0]);
    if (!nav) return null;
    const short = nav.slice(0, 2).toLowerCase();
    const supported = SUPPORTED_LOCALES.map(l => l.code);
    if (supported.includes(short)) return short;
    return null;
  } catch (e) {
    return null;
  }
}

export function getLocale() {
  const stored = localStorage.getItem(LOCALE_KEY);
  if (stored) return stored;
  return getNavigatorLocale() || DEFAULT_LOCALE;
}

export function setLocale(code) {
  const supported = SUPPORTED_LOCALES.map(l => l.code);
  if (!supported.includes(code)) return;
  localStorage.setItem(LOCALE_KEY, code);
  document.documentElement.lang = code;
}

export const translations = {
  en: {
    ui: {
      language: "Language",
      menu: "Menu",
      close: "Close",
      openSite: "Open Website",
      logout: "Logout"
    },
    nav: {
      home: "Home",
      about: "About",
      services: "Services",
      industries: "Industries",
      projects: "Case Studies",
      careers: "Careers",
      blog: "Blog",
      contact: "Contact",
      cta: "Request a Proposal",
      admin: "Admin"
    },
    public: {
      footerDesc: "Premium web & mobile development, e-commerce/marketplace systems, and banking-ready dashboards.",
      industriesCta: "Discuss this industry →",
      requirements: "Requirements:",
      apply: "Apply",
      notFoundProject: "Project not found",
      notFoundPost: "Post not found",
      contactThanks: "Thank you — we received your request. We'll reply soon.",
      contactValidation: "Please provide at least your name and email/phone.",
      contactStatusNew: "New",
      heroTagline: "Premium • Platinum • Blue",
      buildWhat: "What we build",
      buildDesc: "A structured ecosystem across software, commerce, and banking-focused dashboards — designed premium and built to last.",
      premiumProcess: "Premium process",
      focusIndustries: "Focus industries",
      processDesc: "We keep delivery structured: architecture first, premium UI, quality control, then launch & support.",
      focusDesc: "E-commerce & marketplaces, banking/fintech dashboards, and operational systems where control and reporting matter.",
      adminIncluded: "Admin Panel Included",
      adminDesc: "Manage services, projects, blog, careers, and incoming leads in a dedicated admin dashboard. Changes reflect instantly across the site.",
      aboutWho: "Who we are",
      aboutValues: "Values",
      aboutHow: "How we deliver",
      aboutDelivery: "A structured delivery pipeline designed to stay stable and maintainable as you scale.",
      stepLabel: "Step",
      serviceFallback: "Service",
      servicesIntro: "Premium engineering & design across software development, e-commerce/marketplaces, and banking-ready dashboards.",
      deliveryTitle: "Delivery model",
      deliveryCopy: "We start with the architecture and UI system. Then we build modules, integrate analytics, and ship in controlled milestones — with ongoing support.",
      projectsIntro: "Selected examples across marketplaces, banking dashboards, and operational systems.",
      blogIntro: "Insights on marketplaces, premium UX, admin systems, and banking-ready dashboards.",
      careersIntro: "We build premium systems. Join a team that cares about design, structure, and reliability.",
      teamTitle: "Our team",
      contactIntro: "Tell us what you’re building. We’ll reply with a structured proposal.",
      contactFormTitle: "Send a request",
      contactName: "Your name *",
      contactCompany: "Company",
      contactEmail: "Email",
      contactPhone: "Phone",
      contactInterest: "Interest",
      contactTopic: "Topic",
      contactMessage: "Message",
      contactCompanyPlaceholder: "Company name",
      contactTopicPlaceholder: "What do you want to build?",
      contactMessagePlaceholder: "Describe your project, timeline, and goals...",
      contactInterestSoftware: "Software Development",
      contactInterestCommerce: "E-commerce / Marketplace",
      contactInterestBanking: "Banking / Fintech Dashboard",
      contactInterestDesign: "UI/UX & Design System",
      contactInterestSupport: "Support & Scaling",
      contactHelper: "Tip: mention industry (e-commerce/banking), required modules, and target markets.",
      contactSubmit: "Send request",
      companyDetails: "Company details",
      companyDetailsCopy: "We combine premium UI/UX with stable engineering and admin tooling — across commerce and banking-ready systems.",
      noteBadge: "Note",
      noteCopy: "In this demo, requests are stored locally and visible in Admin → Leads.",
      industriesIntro: "We build systems where reliability, reporting, and premium UX are business-critical.",
      projectDetails: "Details",
      industry: "Industry",
      tags: "Tags",
      nextStep: "Next step",
      projectNextCopy: "Want a similar system? We can estimate and propose a clean architecture with premium UI.",
      openLink: "Open link",
      postLabel: "Post",
      postHelpTitle: "Need help?",
      postHelpCopy: "If you're building a marketplace, e-commerce platform, or a banking-ready dashboard — we can propose a premium architecture."
    },
    admin: {
      brand: "Alievs Space",
      console: "Admin Console",
      overview: "Overview",
      quickActions: "Quick actions",
      status: "Status",
      tip: "Tip: Use Settings → Export JSON to save a backup.",
      manageCopy: "Manage site content, services, projects, blog posts, careers, and leads.",
      editServices: "Edit Services",
      editProjects: "Edit Projects",
      editBlog: "Edit Blog",
      viewLeads: "View Leads",
      services: "Services",
      leads: "Leads",
      settings: "Settings",
      servicesSub: "Add, edit, and delete services shown on the public website.",
      newService: "New service",
      projectsSub: "Manage case studies shown on the public website.",
      newProject: "New project",
      blogSub: "Manage blog posts. Content supports basic HTML.",
      newPost: "New post",
      careersSub: "Manage vacancies displayed on the Careers page.",
      newVacancy: "New vacancy",
      leadsSub: "Requests submitted from the Contact page.",
      exportJson: "Export JSON",
      clearLeads: "Clear leads",
      updateStatus: "Update status",
      leadId: "Lead ID",
      update: "Update",
      noLeads: "No leads yet. Submit one from the public Contact page.",
      selectLead: "Select a lead first",
      leadNotFound: "Lead not found",
      updated: "Updated",
      cleared: "Cleared",
      category: "Category",
      categoryPlaceholder: "Software / Commerce / Banking",
      title: "Title",
      description: "Description",
      location: "Location",
      type: "Type",
      bullets: "Bullets (comma-separated)",
      formCreate: "Create / Edit",
      formSave: "Save",
      formCancel: "Cancel",
      editAction: "Edit",
      deleteAction: "Delete",
      actions: "Actions",
      editService: "Edit service",
      createService: "Create service",
      serviceTitlePlaceholder: "Web & Mobile Development",
      serviceDescPlaceholder: "Short premium description",
      saved: "Saved",
      deleted: "Deleted",
      editProject: "Edit project",
      createProject: "Create project",
      idLabel: "ID (unique)",
      editPost: "Edit post",
      createPost: "Create post",
      editVacancy: "Edit vacancy",
      createVacancy: "Create vacancy",
      roleDescription: "Short role description",
      requirementsLabel: "Requirements (comma-separated)"
    },
    leads: {
      date: "Date",
      name: "Name",
      contact: "Contact",
      interest: "Interest"
    },
    projects: {
      summary: "Summary",
      summaryPlaceholder: "One-paragraph summary",
      industryPlaceholder: "E-commerce / Banking",
      titlePlaceholder: "Project title",
      tagsLabel: "Tags (comma-separated)",
      linkLabel: "External link"
    },
    blog: {
      date: "Date",
      excerpt: "Excerpt",
      htmlContent: "HTML content",
      htmlTip: "Tip: Use <p>...</p> and simple tags.",
      htmlPlaceholder: "<p>Write content…</p>"
    }
  },
  ru: {
    ui: {
      language: "Язык",
      menu: "Меню",
      close: "Закрыть",
      openSite: "Открыть сайт",
      logout: "Выйти"
    },
    nav: {
      home: "Главная",
      about: "О нас",
      services: "Услуги",
      industries: "Отрасли",
      projects: "Кейсы",
      careers: "Карьера",
      blog: "Блог",
      contact: "Контакты",
      cta: "Запросить предложение",
      admin: "Админ"
    },
    public: {
      footerDesc: "Премиальная разработка веб и мобильных продуктов, e-commerce/маркетплейсы и банковские дашборды.",
      industriesCta: "Обсудить отрасль →",
      requirements: "Требования:",
      apply: "Откликнуться",
      notFoundProject: "Проект не найден",
      notFoundPost: "Статья не найдена",
      contactThanks: "Спасибо — мы получили запрос и скоро ответим.",
      contactValidation: "Укажите имя и контакт (email или телефон).",
      contactStatusNew: "Новая",
      heroTagline: "Premium • Platinum • Blue",
      buildWhat: "Что мы делаем",
      buildDesc: "Структурированная экосистема ПО, e-commerce и банковских дашбордов — премиальный дизайн и надежная реализация.",
      premiumProcess: "Премиальный процесс",
      focusIndustries: "Ключевые отрасли",
      processDesc: "Структурированный процесс: архитектура, премиальный UI, контроль качества, запуск и поддержка.",
      focusDesc: "E-commerce и маркетплейсы, финтех-дашборды и операционные системы с отчетностью.",
      adminIncluded: "Админ-панель включена",
      adminDesc: "Управляйте услугами, кейсами, блогом, вакансиями и лидами. Изменения сразу на сайте.",
      aboutWho: "Кто мы",
      aboutValues: "Ценности",
      aboutHow: "Как мы работаем",
      aboutDelivery: "Структурированный процесс поставки, который остаётся стабильным при росте.",
      stepLabel: "Шаг",
      serviceFallback: "Услуга",
      servicesIntro: "Премиальная инженерия и дизайн: разработка, e-commerce/маркетплейсы и банковские дашборды.",
      deliveryTitle: "Модель поставки",
      deliveryCopy: "Начинаем с архитектуры и UI системы, затем строим модули, подключаем аналитику и сдаём контролируемыми этапами с поддержкой.",
      projectsIntro: "Примеры проектов: маркетплейсы, банковские дашборды и операционные системы.",
      blogIntro: "Мысли о маркетплейсах, премиальном UX, админ-системах и банковских панелях.",
      careersIntro: "Мы строим премиальные системы. Присоединяйтесь, если важны дизайн, структура и надежность.",
      teamTitle: "Наша команда",
      contactIntro: "Расскажите, что хотите создать. Ответим структурным предложением.",
      contactFormTitle: "Отправить запрос",
      contactName: "Ваше имя *",
      contactCompany: "Компания",
      contactEmail: "Email",
      contactPhone: "Телефон",
      contactInterest: "Интерес",
      contactTopic: "Тема",
      contactMessage: "Сообщение",
      contactCompanyPlaceholder: "Название компании",
      contactTopicPlaceholder: "Что хотите построить?",
      contactMessagePlaceholder: "Опишите проект, сроки и цели...",
      contactInterestSoftware: "Разработка ПО",
      contactInterestCommerce: "E-commerce / Маркетплейс",
      contactInterestBanking: "Банковский / финтех дашборд",
      contactInterestDesign: "UI/UX и дизайн-система",
      contactInterestSupport: "Поддержка и масштабирование",
      contactHelper: "Совет: укажите отрасль, нужные модули и целевые рынки.",
      contactSubmit: "Отправить",
      companyDetails: "Данные компании",
      companyDetailsCopy: "Мы соединяем премиальный UX/UI с надежной инженерией и админ-инструментами для commerce и банковских систем.",
      noteBadge: "Заметка",
      noteCopy: "В демо запросы сохраняются локально и видны в Admin → Leads.",
      industriesIntro: "Мы делаем системы, где критичны надежность, отчетность и премиальный UX.",
      projectDetails: "Детали",
      industry: "Отрасль",
      tags: "Теги",
      nextStep: "Следующий шаг",
      projectNextCopy: "Хотите похожую систему? Рассчитаем и предложим архитектуру с премиальным UI.",
      openLink: "Открыть ссылку",
      postLabel: "Статья",
      postHelpTitle: "Нужна помощь?",
      postHelpCopy: "Если строите маркетплейс, e-commerce или банковский дашборд — подготовим архитектуру с премиальным UX."
    },
    admin: {
      brand: "Alievs Space",
      console: "Админ-консоль",
      overview: "Обзор",
      quickActions: "Быстрые действия",
      status: "Статус",
      tip: "Совет: сделайте экспорт JSON в Настройках, чтобы сохранить бэкап.",
      manageCopy: "Управляйте контентом сайта, услугами, кейсами, блогом, карьерой и лидами.",
      editServices: "Редактировать услуги",
      editProjects: "Редактировать кейсы",
      editBlog: "Редактировать блог",
      viewLeads: "Лиды",
      services: "Услуги",
      leads: "Лиды",
      settings: "Настройки",
      servicesSub: "Добавляйте и изменяйте услуги, которые видят пользователи.",
      newService: "Новая услуга",
      projectsSub: "Управляйте кейсами, которые видят пользователи.",
      newProject: "Новый проект",
      blogSub: "Управляйте статьями блога. Поддерживается простой HTML.",
      newPost: "Новая статья",
      careersSub: "Управляйте вакансиями на странице Карьера.",
      newVacancy: "Новая вакансия",
      leadsSub: "Заявки с публичной страницы Контактов.",
      exportJson: "Экспорт JSON",
      clearLeads: "Очистить лиды",
      updateStatus: "Обновить статус",
      leadId: "ID лида",
      update: "Обновить",
      noLeads: "Лидов пока нет. Отправьте запрос с публичной страницы Контактов.",
      selectLead: "Сначала выберите лид",
      leadNotFound: "Лид не найден",
      updated: "Обновлено",
      cleared: "Очищено",
      category: "Категория",
      categoryPlaceholder: "Software / Commerce / Banking",
      title: "Название",
      description: "Описание",
      location: "Локация",
      type: "Тип",
      bullets: "Список (через запятую)",
      formCreate: "Создать / Редактировать",
      formSave: "Сохранить",
      formCancel: "Отмена",
      editAction: "Править",
      deleteAction: "Удалить",
      actions: "Действия",
      editService: "Редактировать услугу",
      createService: "Создать услугу",
      serviceTitlePlaceholder: "Веб и мобильная разработка",
      serviceDescPlaceholder: "Короткое премиальное описание",
      saved: "Сохранено",
      deleted: "Удалено",
      editProject: "Редактировать проект",
      createProject: "Создать проект",
      idLabel: "ID (уникальный)",
      editPost: "Редактировать статью",
      createPost: "Создать статью",
      editVacancy: "Редактировать вакансию",
      createVacancy: "Создать вакансию",
      roleDescription: "Короткое описание роли",
      requirementsLabel: "Требования (через запятую)"
    },
    leads: {
      date: "Дата",
      name: "Имя",
      contact: "Контакт",
      interest: "Интерес"
    },
    projects: {
      summary: "Описание",
      summaryPlaceholder: "Короткое описание",
      industryPlaceholder: "E-commerce / Банкинг",
      titlePlaceholder: "Название проекта",
      tagsLabel: "Теги (через запятую)",
      linkLabel: "Внешняя ссылка"
    },
    blog: {
      date: "Дата",
      excerpt: "Кратко",
      htmlContent: "HTML контент",
      htmlTip: "Совет: используйте <p>...</p> и простые теги.",
      htmlPlaceholder: "<p>Текст статьи…</p>"
    }
  },
  az: {
    ui: {
      language: "Dil",
      menu: "Menyu",
      close: "Bağla",
      openSite: "Saytı aç",
      logout: "Çıxış"
    },
    nav: {
      home: "Baş səhifə",
      about: "Haqqımızda",
      services: "Xidmətlər",
      industries: "Sahələr",
      projects: "Layihələr",
      careers: "Karyera",
      blog: "Bloq",
      contact: "Əlaqə",
      cta: "Təklif istəyin",
      admin: "Admin"
    },
    public: {
      footerDesc: "Premium veb və mobil inkişaf, e-ticarət/marketpleys sistemləri və bank paneli həlləri.",
      industriesCta: "Bu sahəni müzakirə edək →",
      requirements: "Tələblər:",
      apply: "Müraciət et",
      notFoundProject: "Layihə tapılmadı",
      notFoundPost: "Məqalə tapılmadı",
      contactThanks: "Təşəkkürlər — sorğunuzu aldıq, tezliklə cavab verəcəyik.",
      contactValidation: "Zəhmət olmasa ad və əlaqə məlumatı (email və ya telefon) daxil edin.",
      contactStatusNew: "Yeni",
      heroTagline: "Premium • Platinum • Blue",
      buildWhat: "Biz nələri qururuq",
      buildDesc: "Proqram, e-ticarət və bank yönümlü panellər üzrə strukturlaşdırılmış ekosistem — premium dizayn və dayanıqlı icra.",
      premiumProcess: "Premium proses",
      focusIndustries: "Prioritet sahələr",
      processDesc: "Mərhələli çatdırılma: memarlıq, premium UI, keyfiyyətə nəzarət, buraxılış və dəstək.",
      focusDesc: "E-ticarət və marketpleyslər, fintex panelləri və hesabatlı əməliyyat sistemləri.",
      adminIncluded: "Admin panel daxildir",
      adminDesc: "Xidmətlərə, layihələrə, bloqa, vakansiyalara və lead-lərə nəzarət edin. Dəyişikliklər dərhal saytda görünür.",
      aboutWho: "Biz kimik",
      aboutValues: "Dəyərlər",
      aboutHow: "Necə çatdırırıq",
      aboutDelivery: "Miqyası saxlayan sabit və idarə olunan çatdırılma prosesi.",
      stepLabel: "Addım",
      serviceFallback: "Xidmət",
      servicesIntro: "Premium mühəndislik və dizayn: proqram inkişafı, e-ticarət/marketpleyslər və bank panelləri.",
      deliveryTitle: "Çatdırılma modeli",
      deliveryCopy: "Əvvəlcə memarlıq və UI sistemi qururuq, sonra modullar əlavə edir, analitikanı qoşur və mərhələli şəkildə dəstəklə təqdim edirik.",
      projectsIntro: "Marketpleyslər, bank panelləri və əməliyyat sistemləri üzrə nümunələr.",
      blogIntro: "Marketpleyslər, premium UX, admin sistemləri və bank panelləri barədə fikirlər.",
      careersIntro: "Premium sistemlər qururuq. Dizayn və etibarlılığı önəmli sayan komandaya qoşulun.",
      teamTitle: "Komandamız",
      contactIntro: "Nə qurmaq istədiyinizi deyin, strukturlu təklif göndərək.",
      contactFormTitle: "Sorğu göndərin",
      contactName: "Adınız *",
      contactCompany: "Şirkət",
      contactEmail: "Email",
      contactPhone: "Telefon",
      contactInterest: "Maraq",
      contactTopic: "Mövzu",
      contactMessage: "Mesaj",
      contactCompanyPlaceholder: "Şirkətin adı",
      contactTopicPlaceholder: "Nə qurmaq istəyirsiniz?",
      contactMessagePlaceholder: "Layihəni, müddətləri və məqsədləri təsvir edin...",
      contactInterestSoftware: "Proqram inkişafı",
      contactInterestCommerce: "E-ticarət / Marketpleys",
      contactInterestBanking: "Bank / Fintex paneli",
      contactInterestDesign: "UI/UX və dizayn sistemi",
      contactInterestSupport: "Dəstək və miqyaslama",
      contactHelper: "Tövsiyə: sahəni, lazımi modulları və hədəf bazarları qeyd edin.",
      contactSubmit: "Sorğunu göndər",
      companyDetails: "Şirkət məlumatı",
      companyDetailsCopy: "Premium UI/UX-i sabit mühəndislik və admin alətləri ilə birləşdiririk — commerce və bank sistemləri üçün.",
      noteBadge: "Qeyd",
      noteCopy: "Demo rejimində sorğular lokal saxlanılır və Admin → Leads bölməsində görünür.",
      industriesIntro: "Etibarlılıq, hesabat və premium UX vacib olan sistemlər qururuq.",
      projectDetails: "Təfərrüatlar",
      industry: "Sahə",
      tags: "Teqlər",
      nextStep: "Növbəti addım",
      projectNextCopy: "Oxşar sistem lazımdır? Büdcəni və premium UI ilə memarlığı təklif edə bilərik.",
      openLink: "Linki aç",
      postLabel: "Məqalə",
      postHelpTitle: "Kömək lazımdır?",
      postHelpCopy: "Marketpleys, e-ticarət və ya bank paneli qurursunuzsa, premium memarlıq təklif edə bilərik."
    },
    admin: {
      brand: "Alievs Space",
      console: "Admin Konsol",
      overview: "İcmal",
      quickActions: "Sürətli əməliyyatlar",
      status: "Status",
      tip: "Məsləhət: Nastrojka → JSON ixracı ilə ehtiyat nüsxə saxlayın.",
      manageCopy: "Sayt məzmunu, xidmətlər, layihələr, bloq, vakansiyalar və lead-ləri idarə edin.",
      editServices: "Xidmətləri redaktə et",
      editProjects: "Layihələri redaktə et",
      editBlog: "Bloqu redaktə et",
      viewLeads: "Lead-lər",
      services: "Xidmətlər",
      leads: "Lead-lər",
      settings: "Ayarlar",
      servicesSub: "İstifadəçilərə göstərilən xidmətləri əlavə edin və dəyişin.",
      newService: "Yeni xidmət",
      projectsSub: "İctimai saytda görünən layihələri idarə edin.",
      newProject: "Yeni layihə",
      blogSub: "Bloq yazılarını idarə edin. Sadə HTML dəstəklənir.",
      newPost: "Yeni məqalə",
      careersSub: "Karyera səhifəsində göstərilən vakansiyaları idarə edin.",
      newVacancy: "Yeni vakansiya",
      leadsSub: "Əlaqə səhifəsindən daxil olan sorğular.",
      exportJson: "JSON ixracı",
      clearLeads: "Lead-ləri sil",
      updateStatus: "Statusu yenilə",
      leadId: "Lead ID",
      update: "Yenilə",
      noLeads: "Hələ lead yoxdur. Əlaqə səhifəsindən sorğu göndərin.",
      selectLead: "Əvvəl lead seçin",
      leadNotFound: "Lead tapılmadı",
      updated: "Yeniləndi",
      cleared: "Təmizləndi",
      category: "Kateqoriya",
      categoryPlaceholder: "Proqram / Commerce / Bank",
      title: "Başlıq",
      description: "Təsvir",
      location: "Məkan",
      type: "Tip",
      bullets: "Bəndlər (vergüllə)",
      formCreate: "Yarat / Redaktə et",
      formSave: "Yadda saxla",
      formCancel: "Ləğv et",
      editAction: "Düzəliş",
      deleteAction: "Sil",
      actions: "Əməliyyatlar",
      editService: "Xidməti redaktə et",
      createService: "Xidmət yarat",
      serviceTitlePlaceholder: "Veb və mobil inkişaf",
      serviceDescPlaceholder: "Qısa premium təsvir",
      saved: "Yadda saxlandı",
      deleted: "Silindi",
      editProject: "Layihəni redaktə et",
      createProject: "Layihə yarat",
      idLabel: "ID (unikal)",
      editPost: "Məqaləni redaktə et",
      createPost: "Məqalə yarat",
      editVacancy: "Vakansiyanı redaktə et",
      createVacancy: "Vakansiya yarat",
      roleDescription: "Rolu qısa təsvir edin",
      requirementsLabel: "Tələblər (vergüllə)"
    },
    leads: {
      date: "Tarix",
      name: "Ad",
      contact: "Əlaqə",
      interest: "Maraq"
    },
    projects: {
      summary: "Xülasə",
      summaryPlaceholder: "Bir abzaslıq xülasə",
      industryPlaceholder: "E-ticarət / Bank",
      titlePlaceholder: "Layihə adı",
      tagsLabel: "Teqlər (vergüllə)",
      linkLabel: "Xarici link"
    },
    blog: {
      date: "Tarix",
      excerpt: "Qısa məzmun",
      htmlContent: "HTML məzmunu",
      htmlTip: "Tövsiyə: <p>...</p> və sadə teqlərdən istifadə edin.",
      htmlPlaceholder: "<p>Məzmunu yazın…</p>"
    }
  }
};

function getPath(obj, path) {
  return path.split(".").reduce((acc, part) => (acc && acc[part] !== undefined ? acc[part] : undefined), obj);
}

export function t(key, fallback = "") {
  const lang = getLocale();
  const byLang = translations[lang] || translations[DEFAULT_LOCALE] || {};
  const val = getPath(byLang, key);
  return val ?? fallback ?? key;
}

export function applyI18n(root = document) {
  const nodes = root.querySelectorAll("[data-i18n]");
  nodes.forEach((el) => {
    const key = el.dataset.i18n;
    const text = t(key, el.textContent);
    if (text) el.textContent = text;
  });

  root.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.dataset.i18nPlaceholder;
    const text = t(key, el.getAttribute("placeholder") || "");
    el.setAttribute("placeholder", text);
  });
}
