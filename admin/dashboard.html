<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dashboard — Admin</title>
  <link rel="stylesheet" href="./css/admin.css"/>
</head>
<body>
  <div class="shell">
    <aside class="sidebar" id="sidebar"></aside>
    <main class="content">
      
<div class="card">
  <div class="h1" id="dashTitle">Overview</div>
  <div class="small" id="dashCopy">Manage site content, services, projects, blog posts, careers, and leads.</div>
  <div class="hr"></div>
  <div class="two">
    <div class="card" style="box-shadow:none">
      <div class="h2" id="dashQuickTitle">Quick actions</div>
      <div class="grid">
        <a class="btn primary" id="dashSvcBtn" href="./services.html">Edit Services</a>
        <a class="btn" id="dashPrjBtn" href="./projects.html">Edit Projects</a>
        <a class="btn" id="dashBlogBtn" href="./blog.html">Edit Blog</a>
        <a class="btn" id="dashLeadsBtn" href="./leads.html">View Leads</a>
      </div>
    </div>
    <div class="card" style="box-shadow:none">
      <div class="h2" id="dashStatusTitle">Status</div>
      <div class="small" id="stats">Loading...</div>
      <div class="hr"></div>
      <div class="small" id="dashTip">Tip: Use Settings → Export JSON to save a backup.</div>
    </div>
  </div>
</div>
<script type="module">
  import { bootstrapIfNeeded, load } from "./js/store.js";
  await bootstrapIfNeeded();
  const c = load();
  const leads = c?.leads?.length ?? 0;
  const services = c?.services?.length ?? 0;
  const projects = c?.projects?.length ?? 0;
  const posts = c?.blog?.length ?? 0;
  const jobs = c?.careers?.length ?? 0;
  document.getElementById("stats").textContent =
    `Services: ${services} • Projects: ${projects} • Blog: ${posts} • Careers: ${jobs} • Leads: ${leads}`;
</script>

    </main>
  </div>
  <script type="module">
    import { requireAuth, logout } from "./js/auth.js";
    import { mountShell, toast } from "./js/modules/layout.js";
    requireAuth();
    mountShell("dashboard");
    const lb = document.getElementById("logoutBtn");
    lb?.addEventListener("click", ()=>{ logout(); location.href="./login.html"; });
  </script>
  
</body>
</html>
